(()=>{"use strict";var e={769:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAME=void 0,t.GAME=class{constructor(){this.turn="W",this.board=Array.from(Array(8),(()=>Array(8).fill("EMPTY"))),this.initStartPosition(),this.turn="W"}initStartPosition(){this.initPawns(),this.initMinorPieces(),this.initRoyalty()}initPawns(){for(let e=0;e<8;e++)this.setPieceAt(e,1,"PAWN","W"),this.setPieceAt(e,6,"PAWN","B")}initMinorPieces(){["ROOK","KNIGHT","BISHOP"].forEach(((e,t)=>{this.setPieceAt(t,0,e,"W"),this.setPieceAt(t,7,e,"B"),this.setPieceAt(7-t,0,e,"W"),this.setPieceAt(7-t,7,e,"B")}),this)}initRoyalty(){this.setPieceAt(3,0,"QUEEN","W"),this.setPieceAt(3,7,"QUEEN","B"),this.setPieceAt(4,0,"KING","W"),this.setPieceAt(4,7,"KING","B")}setPieceAt(e,t,r,s){let i={ruleSet:r,color:s};this.board[e][t]=i}clearSquareAt(e,t){this.board[e][t]="EMPTY"}getBoard(){return this.board}legalMovesByWhatIs(e){let t=this.board[e.x][e.y];return"EMPTY"===t?this.getCleanThreatBoard():this.getLegalMovesOf(t,e)}getLegalMovesOf(e,t){return this.getCleanThreatBoard()}candidateMoveIsLegal(e,t,r){}getMovespaceOf(e,t){switch(e.ruleSet){case"QUEEN":return this.queenMovespace(t);case"KING":return this.kingMovespace(e.color,t);case"KNIGHT":return this.knightMovespace(t);case"BISHOP":return this.bishopMovespace(t);case"ROOK":return this.rookMovespace(t);case"PAWN":return this.pawnMovespace(t)}}queenMovespace(e){return this.getCleanThreatBoard()}bishopMovespace(e){return this.getCleanThreatBoard()}rookMovespace(e){return this.getCleanThreatBoard()}pawnMovespace(e){return this.getCleanThreatBoard()}knightMovespace(e){return this.getCleanThreatBoard()}kingMovespace(e,t){return this.getCleanThreatBoard()}isThereAThreatAt(e,t){return!1}getCleanThreatBoard(){return Array.from(Array(8),(()=>Array(8).fill(!1)))}}},419:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RENDERER=void 0,t.RENDERER=class{getPieceDrawerOptions(){return["Text","Sprites"]}getBoardDrawerOptions(){return["Solid"]}setBoardDrawer(e){if("Solid"===e)return this.currentBoardDrawer=new o(this),this.curBDrawerType="Solid",!0}setPieceDrawer(e){switch(e){case"Text":return this.currentPieceDrawer=new s(this),this.curPDrawerType="Text",!0;case"Sprites":return this.currentPieceDrawer=new i(this),this.curPDrawerType="Sprites",!0}}constructor(e,t){this.renderEnabled=!1,this.CTX=t,this.sqDim=20,this.curBDrawerType="Solid",this.currentBoardDrawer=new o(this),this.curPDrawerType="Text",this.currentPieceDrawer=new s(this)}draw(e,t){!1===this.renderEnabled?this.drawToConsole(e,t):(this.currentBoardDrawer.draw(t),this.drawSprites(e))}drawSprites(e){let t,[r,s]=[0,0];for(let i=0;i<8;i++)for(let a=0;a<8;a++)[r,s]=this.boardToCanvasCoordTransform(i,a),t=e[i][a],"EMPTY"!=t&&this.currentPieceDrawer.drawSpriteAt(r,s,t)}drawToConsole(e,t){let r,[s,i]=["",""];for(var a=7;a>=0;a--){for(var o=0;o<8;o++)r=e[o][a],"EMPTY"===r?i="X":(i=this.getLetterFromPiece(r),"B"===r.color&&(i=i.toLowerCase())),s+=i;console.log(s),s=""}}boardToCanvasCoordTransform(e,t){return[this.sqDim*e,this.sqDim*(8-t)]}getSqDim(){return this.sqDim}getCTX(){return this.CTX}getLetterFromPiece(e){switch(e.ruleSet){case"KING":return"K";case"QUEEN":return"Q";case"ROOK":return"R";case"BISHOP":return"B";case"KNIGHT":return"N";case"PAWN":return"P"}}};class r{constructor(e){this.parent=e}getSprite(e){switch(e.color){case"W":return this.getWhiteSprite(e);case"B":return this.getBlackSprite(e)}}}class s extends r{constructor(e){super(e)}drawSpriteAt(e,t,r){let s=this.parent.getCTX(),i=(this.parent.getSqDim(),this.getSprite(r));s.fillStyle=i.spriteColor,s.fillText(i.spriteChar,e,t)}getWhiteSprite(e){return{spriteChar:this.parent.getLetterFromPiece(e),spriteColor:"white"}}getBlackSprite(e){return{spriteChar:this.parent.getLetterFromPiece(e).toLowerCase(),spriteColor:"black"}}}class i extends r{drawSpriteAt(e,t,r){}getBlackSprite(e){return[0,0,0,0]}getWhiteSprite(e){return[0,0,0,0]}}class a{constructor(e){this.evenCheckerSprite="",this.oddCheckerSprite="",this.selectedCheckerSprite="",this.parent=e}BGSpriteAtXYGivenThreats(e,t,r){return r[e][t]?this.selectedCheckerSprite:e+t%2==0?this.evenCheckerSprite:this.oddCheckerSprite}}class o extends a{constructor(e){super(e),this.evenCheckerSprite="beige",this.oddCheckerSprite="brown",this.selectedCheckerSprite="grey"}draw(e){let t=this.parent.getCTX(),r=this.parent.getSqDim(),[s,i,a]=["",0,0];for(var o=0;o<8;o++)for(var n=0;n<8;n++)s=this.BGSpriteAtXYGivenThreats(o,n,e),t.fillStyle=s,[i,a]=this.parent.boardToCanvasCoordTransform(o,n),t.fillRect(i,a,r,r)}}}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}(()=>{const e=r(769),t=r(419);let s=document.createElement("canvas");document.body.appendChild(s);let i=s.getContext("2d");i&&function(r){let s=(new e.GAME).getBoard();new t.RENDERER(100,r).draw(s,[[!1]])}(i)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cy8uL3NyYy9yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9sb2NhbF9jaGVzcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9sb2NhbF9jaGVzcy8uL3NyYy9wYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuR0FNRSA9IHZvaWQgMDtcclxuY2xhc3MgR0FNRSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnR1cm4gPSBcIldcIjtcclxuICAgICAgICB0aGlzLmJvYXJkID0gQXJyYXkuZnJvbShBcnJheSg4KSwgKCkgPT4gQXJyYXkoOCkuZmlsbChcIkVNUFRZXCIpKTtcclxuICAgICAgICB0aGlzLmluaXRTdGFydFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy50dXJuID0gXCJXXCI7XHJcbiAgICB9XHJcbiAgICBpbml0U3RhcnRQb3NpdGlvbigpIHtcclxuICAgICAgICB0aGlzLmluaXRQYXducygpO1xyXG4gICAgICAgIHRoaXMuaW5pdE1pbm9yUGllY2VzKCk7XHJcbiAgICAgICAgdGhpcy5pbml0Um95YWx0eSgpO1xyXG4gICAgfVxyXG4gICAgaW5pdFBhd25zKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGllY2VBdChpLCAxLCBcIlBBV05cIiwgXCJXXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFBpZWNlQXQoaSwgNiwgXCJQQVdOXCIsIFwiQlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0TWlub3JQaWVjZXMoKSB7XHJcbiAgICAgICAgbGV0IG1pbm9yUGllY2VzID0gW1wiUk9PS1wiLCBcIktOSUdIVFwiLCBcIkJJU0hPUFwiXTtcclxuICAgICAgICBtaW5vclBpZWNlcy5mb3JFYWNoKChydWxlc2V0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldFBpZWNlQXQoaW5kZXgsIDAsIHJ1bGVzZXQsIFwiV1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRQaWVjZUF0KGluZGV4LCA3LCBydWxlc2V0LCBcIkJcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGllY2VBdCg3IC0gaW5kZXgsIDAsIHJ1bGVzZXQsIFwiV1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRQaWVjZUF0KDcgLSBpbmRleCwgNywgcnVsZXNldCwgXCJCXCIpO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgfVxyXG4gICAgaW5pdFJveWFsdHkoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRQaWVjZUF0KDMsIDAsIFwiUVVFRU5cIiwgXCJXXCIpO1xyXG4gICAgICAgIHRoaXMuc2V0UGllY2VBdCgzLCA3LCBcIlFVRUVOXCIsIFwiQlwiKTtcclxuICAgICAgICB0aGlzLnNldFBpZWNlQXQoNCwgMCwgXCJLSU5HXCIsIFwiV1wiKTtcclxuICAgICAgICB0aGlzLnNldFBpZWNlQXQoNCwgNywgXCJLSU5HXCIsIFwiQlwiKTtcclxuICAgIH1cclxuICAgIHNldFBpZWNlQXQoeCwgeSwgbmV3UnVsZVNldCwgbmV3Q29sb3IpIHtcclxuICAgICAgICBsZXQgcGllY2UgPSB7IHJ1bGVTZXQ6IG5ld1J1bGVTZXQsIGNvbG9yOiBuZXdDb2xvciB9O1xyXG4gICAgICAgIHRoaXMuYm9hcmRbeF1beV0gPSBwaWVjZTtcclxuICAgIH1cclxuICAgIGNsZWFyU3F1YXJlQXQoeCwgeSkge1xyXG4gICAgICAgIHRoaXMuYm9hcmRbeF1beV0gPSBcIkVNUFRZXCI7XHJcbiAgICB9XHJcbiAgICBnZXRCb2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgIH1cclxuICAgIGxlZ2FsTW92ZXNCeVdoYXRJcyhhdFNxdWFyZSkge1xyXG4gICAgICAgIGxldCBwaWVjZSA9IHRoaXMuYm9hcmRbYXRTcXVhcmUueF1bYXRTcXVhcmUueV07XHJcbiAgICAgICAgaWYgKHBpZWNlID09PSBcIkVNUFRZXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2xlYW5UaHJlYXRCb2FyZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRMZWdhbE1vdmVzT2YocGllY2UsIGF0U3F1YXJlKTtcclxuICAgIH1cclxuICAgIGdldExlZ2FsTW92ZXNPZihwaWVjZSwgYXRTcXVhcmUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDbGVhblRocmVhdEJvYXJkKCk7XHJcbiAgICAgICAgLy8gbGV0IGNhbmRpZGF0ZU1vdmVzOmJvb2xlYW5bXVtdID0gdGhpcy5nZXRNb3Zlc3BhY2VPZihwaWVjZSxhdFNxdWFyZSk7XHJcbiAgICAgICAgLy8gZm9yIGVhY2ggdHJ1ZSAoeCx5KSBpbiBjYW5kaWRhdGVNb3Zlc1xyXG4gICAgICAgIC8vICAgICAgaWYgbW92ZUluZHVjZXNDaGVjayhhdFNxdWFyZSwoeCx5KSlcclxuICAgICAgICAvLyAgICAgIGlmKHBpZWNlIGlzIGtpbmcpIC0gY2hlY2sgdGhhdCB5b3UgYXJlbnQgY2FzdGxpbmcgdGhyb3VnaCB0aHJlYXRlbmVkIHNxdWFyZXNcclxuICAgICAgICAvL3JldHVybiBjYW5kaWRhdGVtb3Zlc1xyXG4gICAgfVxyXG4gICAgY2FuZGlkYXRlTW92ZUlzTGVnYWwocGllY2UsIG9yaWdpbiwgdGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gY3JlYXRlIGNvcHkgb2YgYm9hcmQgd2l0aCBjYW5kaWRhdGUgbW92ZSBvbiBpdCxcclxuICAgICAgICAvLyB0aGVuIGV4YW1pbmUgd2hldGhlciB0aGUga2luZyBpcyBpbiBjaGVjayBhZnRlci5cclxuICAgICAgICAvLyBcclxuICAgIH1cclxuICAgIGdldE1vdmVzcGFjZU9mKHBpZWNlLCBhdFNxdWFyZSkge1xyXG4gICAgICAgIHN3aXRjaCAocGllY2UucnVsZVNldCkge1xyXG4gICAgICAgICAgICBjYXNlIChcIlFVRUVOXCIpOiByZXR1cm4gdGhpcy5xdWVlbk1vdmVzcGFjZShhdFNxdWFyZSk7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiS0lOR1wiKTogcmV0dXJuIHRoaXMua2luZ01vdmVzcGFjZShwaWVjZS5jb2xvciwgYXRTcXVhcmUpO1xyXG4gICAgICAgICAgICBjYXNlIChcIktOSUdIVFwiKTogcmV0dXJuIHRoaXMua25pZ2h0TW92ZXNwYWNlKGF0U3F1YXJlKTtcclxuICAgICAgICAgICAgY2FzZSAoXCJCSVNIT1BcIik6IHJldHVybiB0aGlzLmJpc2hvcE1vdmVzcGFjZShhdFNxdWFyZSk7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiUk9PS1wiKTogcmV0dXJuIHRoaXMucm9va01vdmVzcGFjZShhdFNxdWFyZSk7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiUEFXTlwiKTogcmV0dXJuIHRoaXMucGF3bk1vdmVzcGFjZShhdFNxdWFyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVlZW5Nb3Zlc3BhY2UoYXRTcXVhcmUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDbGVhblRocmVhdEJvYXJkKCk7XHJcbiAgICB9XHJcbiAgICBiaXNob3BNb3Zlc3BhY2UoYXRTcXVhcmUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDbGVhblRocmVhdEJvYXJkKCk7XHJcbiAgICB9XHJcbiAgICByb29rTW92ZXNwYWNlKGF0U3F1YXJlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2xlYW5UaHJlYXRCb2FyZCgpO1xyXG4gICAgfVxyXG4gICAgcGF3bk1vdmVzcGFjZShhdFNxdWFyZSkge1xyXG4gICAgICAgIC8vIGlmKHRoaXMuZW5QYXNzYW50UG9zc2libGVGb3JUaGVQYXduKGF0U3F1YXJlKSlcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDbGVhblRocmVhdEJvYXJkKCk7XHJcbiAgICB9XHJcbiAgICBrbmlnaHRNb3Zlc3BhY2UoYXRTcXVhcmUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDbGVhblRocmVhdEJvYXJkKCk7XHJcbiAgICB9XHJcbiAgICBraW5nTW92ZXNwYWNlKGNvbG9yLCBhdFNxdWFyZSkge1xyXG4gICAgICAgIC8vIGNhc3RsZXJpZ2h0cyBjaGVja1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENsZWFuVGhyZWF0Qm9hcmQoKTtcclxuICAgIH1cclxuICAgIGlzVGhlcmVBVGhyZWF0QXQoeHksIGZvclBsYXllcikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGdldENsZWFuVGhyZWF0Qm9hcmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oQXJyYXkoOCksICgpID0+IEFycmF5KDgpLmZpbGwoZmFsc2UpKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkdBTUUgPSBHQU1FO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlJFTkRFUkVSID0gdm9pZCAwO1xyXG4vLyBUaGUgUkVOREVSRVIgZHJhdygpLXMgdG8gdGhlIGNhbnZhcyB3aGVuZXZlciBnaXZlbiBHQU1FIGRhdGEgYnkgdGhlIFBBR0UuXHJcbi8vIFRoZSBkcmF3aW5nIGlzIGRvbmUgYm9hcmQtZmlyc3QsIHBpZWNlcy1zZWNvbmQgYnkgdGhlIFwiY3VycmVudEJvYXJkRHJhd2VyXCIgYW5kIFwiY3VycmVudFBpZWNlRHJhd2VyXCIgY29tcG9uZW50cyByZXNwZWN0aXZlbHkuXHJcbi8vIFRoZSB1c2VyIGNhbiBzd2FwIG91dCBkcmF3ZXJzIG1pZC1nYW1lIGJ5IGNoYW5naW5nIHN0eWxlcyBpbiB0aGUgZ2FtZSBVSS5cclxuLy8gVGhlIFJFTkRFUkVSIGtlZXBzIGEgbGlzdCBvZiBvcHRpb25zIGFuZCByZXBvcnRzIHRoZW0gdGhyb3VnaCB0aGUgUEFHRSB0byB0aGUgVUkgZm9yIGJ1dHRvbiBjb25zdHJ1Y3Rpb24gYW5kIGxpc3RlbmVyLW1ha2luZy5cclxuY2xhc3MgUkVOREVSRVIge1xyXG4gICAgZ2V0UGllY2VEcmF3ZXJPcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiBbXCJUZXh0XCIsIFwiU3ByaXRlc1wiXTtcclxuICAgIH1cclxuICAgIGdldEJvYXJkRHJhd2VyT3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gW1wiU29saWRcIl07XHJcbiAgICB9XHJcbiAgICAvLyBUaGUgc3dpdGNoIHN0YXRlbWVudHMgYmVsb3cgaGF2ZSBubyBkZWZhdWx0IGNhc2UgaW50ZW50aW9uYWxseS5cclxuICAgIC8vIEl0IG1heSBiZSB0aGUgY2FzZSB0aGF0IHRoZSB0eXBlIChYKURyYXdlck9wdGlvbnMgY2hhbmdlcyB3aXRob3V0IHRoZSBjaGFuZ2UgYmVpbmcgYWNjb3VudGVkIGZvciBoZXJlLlxyXG4gICAgLy8gSWYgYSBcImRlZmF1bHRcIiBjYXNlIGV4aXN0cywgVlNDb2RlIGZhaWxzIHRvIHNwb3QgdGhlIGluY29uc2lzdGVuY3ksIGFuZCB3aWxsIG5vdCBwcm9tcHQgeW91IHRvIGNoYW5nZSB0aGlzIG1ldGhvZC5cclxuICAgIHNldEJvYXJkRHJhd2VyKGxhYmVsKSB7XHJcbiAgICAgICAgc3dpdGNoIChsYWJlbCkge1xyXG4gICAgICAgICAgICBjYXNlIChcIlNvbGlkXCIpOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Qm9hcmREcmF3ZXIgPSBuZXcgc29saWRCb2FyZERyYXdlcih0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyQkRyYXdlclR5cGUgPSBcIlNvbGlkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRQaWVjZURyYXdlcihsYWJlbCkge1xyXG4gICAgICAgIHN3aXRjaCAobGFiZWwpIHtcclxuICAgICAgICAgICAgY2FzZSAoXCJUZXh0XCIpOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGllY2VEcmF3ZXIgPSBuZXcgdGV4dFBpZWNlRHJhd2VyKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQRHJhd2VyVHlwZSA9IFwiVGV4dFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiU3ByaXRlc1wiKTpcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBpZWNlRHJhd2VyID0gbmV3IHNwcml0ZVNoZWV0UGllY2VEcmF3ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBEcmF3ZXJUeXBlID0gXCJTcHJpdGVzXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcihzcURpbSwgQ1RYKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5DVFggPSBDVFg7XHJcbiAgICAgICAgdGhpcy5zcURpbSA9IDIwO1xyXG4gICAgICAgIHRoaXMuY3VyQkRyYXdlclR5cGUgPSBcIlNvbGlkXCI7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Qm9hcmREcmF3ZXIgPSBuZXcgc29saWRCb2FyZERyYXdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmN1clBEcmF3ZXJUeXBlID0gXCJUZXh0XCI7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGllY2VEcmF3ZXIgPSBuZXcgdGV4dFBpZWNlRHJhd2VyKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZHJhdyhib2FyZCwgc2VsZWN0ZWRQaWVjZUxlZ2FsTW92ZXMpIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJFbmFibGVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdUb0NvbnNvbGUoYm9hcmQsIHNlbGVjdGVkUGllY2VMZWdhbE1vdmVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJvYXJkRHJhd2VyLmRyYXcoc2VsZWN0ZWRQaWVjZUxlZ2FsTW92ZXMpO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdTcHJpdGVzKGJvYXJkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3U3ByaXRlcyhib2FyZCkge1xyXG4gICAgICAgIGxldCBbeENvLCB5Q29dID0gWzAsIDBdO1xyXG4gICAgICAgIGxldCBjdXJTcXVhcmU7XHJcbiAgICAgICAgYGA7XHJcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCA4OyB4KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCA4OyB5KyspIHtcclxuICAgICAgICAgICAgICAgIFt4Q28sIHlDb10gPSB0aGlzLmJvYXJkVG9DYW52YXNDb29yZFRyYW5zZm9ybSh4LCB5KTtcclxuICAgICAgICAgICAgICAgIGN1clNxdWFyZSA9IGJvYXJkW3hdW3ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1clNxdWFyZSAhPSBcIkVNUFRZXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQaWVjZURyYXdlci5kcmF3U3ByaXRlQXQoeENvLCB5Q28sIGN1clNxdWFyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3VG9Db25zb2xlKGJvYXJkLCBzZWxlY3RlZFBpZWNlVGhyZWF0cykge1xyXG4gICAgICAgIGxldCBjdXJTcXVhcmU7XHJcbiAgICAgICAgbGV0IFtjdXJIb3Jpem9udGFsU2xpY2UsIGN1ckxldHRlcl0gPSBbXCJcIiwgXCJcIl07XHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDc7IHkgPj0gMDsgeS0tKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgODsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJTcXVhcmUgPSBib2FyZFt4XVt5XTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJTcXVhcmUgPT09IFwiRU1QVFlcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckxldHRlciA9IFwiWFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyTGV0dGVyID0gdGhpcy5nZXRMZXR0ZXJGcm9tUGllY2UoY3VyU3F1YXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU3F1YXJlLmNvbG9yID09PSBcIkJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJMZXR0ZXIgPSBjdXJMZXR0ZXIudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvKmlmKHNlbGVjdGVkUGllY2VUaHJlYXRzW3hdW3ldKXtcclxuICAgICAgICAgICAgICAgICAgICBjdXJIb3Jpem9udGFsU2xpY2UgPSBjdXJIb3Jpem9udGFsU2xpY2UrIFwiKFwiK2N1ckxldHRlcitcIilcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjdXJIb3Jpem9udGFsU2xpY2UgKz0gY3VyTGV0dGVyO1xyXG4gICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICBjdXJIb3Jpem9udGFsU2xpY2UgKz0gY3VyTGV0dGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1ckhvcml6b250YWxTbGljZSk7XHJcbiAgICAgICAgICAgIGN1ckhvcml6b250YWxTbGljZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYm9hcmRUb0NhbnZhc0Nvb3JkVHJhbnNmb3JtKHNxdWFyZVgsIHNxdWFyZVkpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuc3FEaW0gKiBzcXVhcmVYLCB0aGlzLnNxRGltICogKDggLSBzcXVhcmVZKV07XHJcbiAgICB9XHJcbiAgICBnZXRTcURpbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcURpbTtcclxuICAgIH1cclxuICAgIGdldENUWCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5DVFg7XHJcbiAgICB9XHJcbiAgICBnZXRMZXR0ZXJGcm9tUGllY2UocGllY2UpIHtcclxuICAgICAgICBzd2l0Y2ggKHBpZWNlLnJ1bGVTZXQpIHtcclxuICAgICAgICAgICAgY2FzZSAoXCJLSU5HXCIpOiByZXR1cm4gXCJLXCI7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiUVVFRU5cIik6IHJldHVybiBcIlFcIjtcclxuICAgICAgICAgICAgY2FzZSAoXCJST09LXCIpOiByZXR1cm4gXCJSXCI7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiQklTSE9QXCIpOiByZXR1cm4gXCJCXCI7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiS05JR0hUXCIpOiByZXR1cm4gXCJOXCI7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiUEFXTlwiKTogcmV0dXJuIFwiUFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnRzLlJFTkRFUkVSID0gUkVOREVSRVI7XHJcbi8vXHJcbi8vIFNQUklURVxyXG4vL1xyXG4vLyBEUkFXRVJTIFxyXG4vL1xyXG4vLyBCRUdJTlxyXG4vL1xyXG5jbGFzcyBwaWVjZVNwcml0ZURyYXdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgIH1cclxuICAgIGdldFNwcml0ZShwaWVjZSkge1xyXG4gICAgICAgIHN3aXRjaCAocGllY2UuY29sb3IpIHtcclxuICAgICAgICAgICAgY2FzZSAoXCJXXCIpOiByZXR1cm4gdGhpcy5nZXRXaGl0ZVNwcml0ZShwaWVjZSk7XHJcbiAgICAgICAgICAgIGNhc2UgKFwiQlwiKTogcmV0dXJuIHRoaXMuZ2V0QmxhY2tTcHJpdGUocGllY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyB0ZXh0UGllY2VEcmF3ZXIgZXh0ZW5kcyBwaWVjZVNwcml0ZURyYXdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQpO1xyXG4gICAgfVxyXG4gICAgZHJhd1Nwcml0ZUF0KHhDbywgeUNvLCBwaWVjZSkge1xyXG4gICAgICAgIGxldCBDVFggPSB0aGlzLnBhcmVudC5nZXRDVFgoKTtcclxuICAgICAgICBsZXQgc3FEaW0gPSB0aGlzLnBhcmVudC5nZXRTcURpbSgpO1xyXG4gICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLmdldFNwcml0ZShwaWVjZSk7XHJcbiAgICAgICAgQ1RYLmZpbGxTdHlsZSA9IHNwcml0ZS5zcHJpdGVDb2xvcjtcclxuICAgICAgICBDVFguZmlsbFRleHQoc3ByaXRlLnNwcml0ZUNoYXIsIHhDbywgeUNvKTtcclxuICAgIH1cclxuICAgIGdldFdoaXRlU3ByaXRlKHBpZWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3ByaXRlQ2hhcjogdGhpcy5wYXJlbnQuZ2V0TGV0dGVyRnJvbVBpZWNlKHBpZWNlKSwgc3ByaXRlQ29sb3I6IFwid2hpdGVcIiB9O1xyXG4gICAgfVxyXG4gICAgZ2V0QmxhY2tTcHJpdGUocGllY2UpIHtcclxuICAgICAgICBsZXQgcGllY2VMZXR0ZXIgPSB0aGlzLnBhcmVudC5nZXRMZXR0ZXJGcm9tUGllY2UocGllY2UpO1xyXG4gICAgICAgIHJldHVybiB7IHNwcml0ZUNoYXI6IHBpZWNlTGV0dGVyLnRvTG93ZXJDYXNlKCksIHNwcml0ZUNvbG9yOiBcImJsYWNrXCIgfTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBzcHJpdGVTaGVldFBpZWNlRHJhd2VyIGV4dGVuZHMgcGllY2VTcHJpdGVEcmF3ZXIge1xyXG4gICAgZHJhd1Nwcml0ZUF0KHhDbywgeUNvLCBzcHJpdGUpIHtcclxuICAgIH1cclxuICAgIGdldEJsYWNrU3ByaXRlKHBpZWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcclxuICAgIH1cclxuICAgIGdldFdoaXRlU3ByaXRlKHBpZWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcclxuICAgIH1cclxufVxyXG4vL1xyXG4vLyBCT0FSRFxyXG4vL1xyXG4vLyBEUkFXRVJTIFxyXG4vL1xyXG4vLyBCRUdJTlxyXG4vL1xyXG5jbGFzcyBib2FyZFNwcml0ZURyYXdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLmV2ZW5DaGVja2VyU3ByaXRlID0gXCJcIjtcclxuICAgICAgICB0aGlzLm9kZENoZWNrZXJTcHJpdGUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaGVja2VyU3ByaXRlID0gXCJcIjtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgIH1cclxuICAgIEJHU3ByaXRlQXRYWUdpdmVuVGhyZWF0cyh4LCB5LCBzZWxlY3RlZFBpZWNlVGhyZWF0cykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFBpZWNlVGhyZWF0c1t4XVt5XSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRDaGVja2VyU3ByaXRlO1xyXG4gICAgICAgIGlmICh4ICsgeSAlIDIgPT0gMClcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbkNoZWNrZXJTcHJpdGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2RkQ2hlY2tlclNwcml0ZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBzb2xpZEJvYXJkRHJhd2VyIGV4dGVuZHMgYm9hcmRTcHJpdGVEcmF3ZXIge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50KSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50KTtcclxuICAgICAgICB0aGlzLmV2ZW5DaGVja2VyU3ByaXRlID0gXCJiZWlnZVwiO1xyXG4gICAgICAgIHRoaXMub2RkQ2hlY2tlclNwcml0ZSA9IFwiYnJvd25cIjtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2hlY2tlclNwcml0ZSA9IFwiZ3JleVwiO1xyXG4gICAgfVxyXG4gICAgZHJhdyhzZWxlY3RlZFBpZWNlVGhyZWF0cykge1xyXG4gICAgICAgIGxldCBDVFggPSB0aGlzLnBhcmVudC5nZXRDVFgoKTtcclxuICAgICAgICBsZXQgc3FEaW0gPSB0aGlzLnBhcmVudC5nZXRTcURpbSgpO1xyXG4gICAgICAgIGxldCBbYmdjb2xvciwgeENvLCB5Q29dID0gW1wiXCIsIDAsIDBdO1xyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgODsgeCsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgODsgeSsrKSB7XHJcbiAgICAgICAgICAgICAgICBiZ2NvbG9yID0gdGhpcy5CR1Nwcml0ZUF0WFlHaXZlblRocmVhdHMoeCwgeSwgc2VsZWN0ZWRQaWVjZVRocmVhdHMpO1xyXG4gICAgICAgICAgICAgICAgQ1RYLmZpbGxTdHlsZSA9IGJnY29sb3I7XHJcbiAgICAgICAgICAgICAgICBbeENvLCB5Q29dID0gdGhpcy5wYXJlbnQuYm9hcmRUb0NhbnZhc0Nvb3JkVHJhbnNmb3JtKHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgQ1RYLmZpbGxSZWN0KHhDbywgeUNvLCBzcURpbSwgc3FEaW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBnYW1lXzEgPSByZXF1aXJlKFwiLi9nYW1lXCIpO1xyXG5jb25zdCByZW5kZXJlcl8xID0gcmVxdWlyZShcIi4vcmVuZGVyZXJcIik7XHJcbmxldCBzcXVhcmVDYW52YXNEaW0gPSA4MDA7XHJcbmxldCBDVlMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKENWUyk7XHJcbmxldCBDVFggPSBDVlMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5pZiAoQ1RYKSB7XHJcbiAgICBzdGFydChDVFgpO1xyXG59XHJcbmZ1bmN0aW9uIHN0YXJ0KENUWCkge1xyXG4gICAgbGV0IGdhbWUgPSBuZXcgZ2FtZV8xLkdBTUUoKTtcclxuICAgIGxldCBib2FyZCA9IGdhbWUuZ2V0Qm9hcmQoKTtcclxuICAgIGxldCByZW5kID0gbmV3IHJlbmRlcmVyXzEuUkVOREVSRVIoc3F1YXJlQ2FudmFzRGltIC8gOCwgQ1RYKTtcclxuICAgIHJlbmQuZHJhdyhib2FyZCwgW1tmYWxzZV1dKTtcclxufVxyXG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJHQU1FIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwidHVybiIsImJvYXJkIiwiQXJyYXkiLCJmcm9tIiwiZmlsbCIsImluaXRTdGFydFBvc2l0aW9uIiwiaW5pdFBhd25zIiwiaW5pdE1pbm9yUGllY2VzIiwiaW5pdFJveWFsdHkiLCJpIiwic2V0UGllY2VBdCIsImZvckVhY2giLCJydWxlc2V0IiwiaW5kZXgiLCJ4IiwieSIsIm5ld1J1bGVTZXQiLCJuZXdDb2xvciIsInBpZWNlIiwicnVsZVNldCIsImNvbG9yIiwiY2xlYXJTcXVhcmVBdCIsImdldEJvYXJkIiwibGVnYWxNb3Zlc0J5V2hhdElzIiwiYXRTcXVhcmUiLCJnZXRDbGVhblRocmVhdEJvYXJkIiwiZ2V0TGVnYWxNb3Zlc09mIiwiY2FuZGlkYXRlTW92ZUlzTGVnYWwiLCJvcmlnaW4iLCJ0YXJnZXQiLCJnZXRNb3Zlc3BhY2VPZiIsInF1ZWVuTW92ZXNwYWNlIiwia2luZ01vdmVzcGFjZSIsImtuaWdodE1vdmVzcGFjZSIsImJpc2hvcE1vdmVzcGFjZSIsInJvb2tNb3Zlc3BhY2UiLCJwYXduTW92ZXNwYWNlIiwiaXNUaGVyZUFUaHJlYXRBdCIsInh5IiwiZm9yUGxheWVyIiwiUkVOREVSRVIiLCJnZXRQaWVjZURyYXdlck9wdGlvbnMiLCJnZXRCb2FyZERyYXdlck9wdGlvbnMiLCJzZXRCb2FyZERyYXdlciIsImxhYmVsIiwiY3VycmVudEJvYXJkRHJhd2VyIiwic29saWRCb2FyZERyYXdlciIsImN1ckJEcmF3ZXJUeXBlIiwic2V0UGllY2VEcmF3ZXIiLCJjdXJyZW50UGllY2VEcmF3ZXIiLCJ0ZXh0UGllY2VEcmF3ZXIiLCJjdXJQRHJhd2VyVHlwZSIsInNwcml0ZVNoZWV0UGllY2VEcmF3ZXIiLCJzcURpbSIsIkNUWCIsInJlbmRlckVuYWJsZWQiLCJkcmF3Iiwic2VsZWN0ZWRQaWVjZUxlZ2FsTW92ZXMiLCJkcmF3VG9Db25zb2xlIiwiZHJhd1Nwcml0ZXMiLCJjdXJTcXVhcmUiLCJ4Q28iLCJ5Q28iLCJib2FyZFRvQ2FudmFzQ29vcmRUcmFuc2Zvcm0iLCJkcmF3U3ByaXRlQXQiLCJzZWxlY3RlZFBpZWNlVGhyZWF0cyIsImN1ckhvcml6b250YWxTbGljZSIsImN1ckxldHRlciIsImdldExldHRlckZyb21QaWVjZSIsInRvTG93ZXJDYXNlIiwiY29uc29sZSIsImxvZyIsInNxdWFyZVgiLCJzcXVhcmVZIiwiZ2V0U3FEaW0iLCJnZXRDVFgiLCJwaWVjZVNwcml0ZURyYXdlciIsInBhcmVudCIsImdldFNwcml0ZSIsImdldFdoaXRlU3ByaXRlIiwiZ2V0QmxhY2tTcHJpdGUiLCJzdXBlciIsInNwcml0ZSIsImZpbGxTdHlsZSIsInNwcml0ZUNvbG9yIiwiZmlsbFRleHQiLCJzcHJpdGVDaGFyIiwiYm9hcmRTcHJpdGVEcmF3ZXIiLCJldmVuQ2hlY2tlclNwcml0ZSIsIm9kZENoZWNrZXJTcHJpdGUiLCJzZWxlY3RlZENoZWNrZXJTcHJpdGUiLCJCR1Nwcml0ZUF0WFlHaXZlblRocmVhdHMiLCJiZ2NvbG9yIiwiZmlsbFJlY3QiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2FtZV8xIiwicmVuZGVyZXJfMSIsIkNWUyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJzcXVhcmVDYW52YXNEaW0iLCJzdGFydCJdLCJzb3VyY2VSb290IjoiIn0=